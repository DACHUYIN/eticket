{"version":3,"sources":["webpack:///D:/WxMiniProgramme/eticket/eticket-front/main.js","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?5996","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?a0c3","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?ef42","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?6b1b","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?2d24","webpack:///D:/WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue?d20a"],"names":["createPage","Page","data","index","picker","radio","startDate","Date","endDate","getTime","imgList","ticketType","ticketName","qrCode","price","totalPrice","submitSuccess","methods","RadioChange","e","detail","value","PickerChange","GetPrice","replace","indexOf","parseFloat","user","uni","getStorageSync","memberShipLevel","toFixed","substring","GetQrCode","GetTypeName","StartDateChange","EndDateChange","ChooseImage","chooseImage","count","sizeType","sourceType","success","res","tempFilePaths","length","concat","ViewImage","previewImage","urls","current","currentTarget","dataset","url","DelImg","showModal","content","confirmText","cancelText","confirm","splice","CommitEticket","wechatOpenId","telephoneNumber","idempotentToken","request","GET_IDEMPOTENT_TOKEN","method","header","token","resData","responseCode","fail","title","showCancel","i","uploadFile","UPLOAD_FILE_URL","filePath","name","formData","uploadFileRes","uploadFileResData","JSON","parse","SUBMIT_ETICKET_URL","imgAddress"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,oH;AACAA,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwG;AACvC;AACL;AACqC;;;AAGjG;AACgI;AAChI,gBAAgB,wIAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAiuB,CAAgB,8sBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0GrvB;;;;AAIA;;;AAGA,mF,CAjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAYe,EACdC,IADc,kBACP,CACN,OAAO,EACNC,KAAK,EAAE,CADD,EAENC,MAAM,EAAE,CAAC,KAAD,E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","file":"pages/commiteticket/commiteticket.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/commiteticket/commiteticket.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./commiteticket.vue?vue&type=template&id=b52c66de&scoped=true&\"\nimport script from \"./commiteticket.vue?vue&type=script&lang=js&\"\nexport * from \"./commiteticket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./commiteticket.vue?vue&type=style&index=0&id=b52c66de&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b52c66de\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('b52c66de', component.options)\n    } else {\n      api.reload('b52c66de', component.options)\n    }\n    module.hot.accept(\"./commiteticket.vue?vue&type=template&id=b52c66de&scoped=true&\", function () {\n      api.rerender('b52c66de', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"WxMiniProgramme/eticket/eticket-front/pages/commiteticket/commiteticket.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commiteticket.vue?vue&type=template&id=b52c66de&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commiteticket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commiteticket.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tUPLOAD_FILE_URL,\n\tSUBMIT_ETICKET_URL\n} from '../../utils/api.js';\nimport {\n\tdateFormat\n} from '../../utils/dateFormat.js';\nimport {\n\tcalculatePrice\n} from '../../utils/calculatePrice.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tpicker: ['餐饮券', '影音娱乐券', '景点门票', '电影票', '演唱会门票', '展览门票'],\n\t\t\tradio: 'SELL', // S:出售 B:求购 进入画面出售按钮处于Checked状态\n\t\t\tstartDate: dateFormat('YYYY-mm-DD', new Date()),\n\t\t\tendDate: dateFormat('YYYY-mm-DD', new Date(new Date().getTime() + 24 * 60 * 60 * 1000)),\n\t\t\timgList: [],\n\t\t\tticketType: 'FOOD',\n\t\t\tticketName: '',\n\t\t\tqrCode: '',\n\t\t\tprice: '',\n\t\t\ttotalPrice: '',\n\t\t\tsubmitSuccess: '0'\n\t\t}\n\t},\n\tmethods: {\n\t\tRadioChange: function(e) {\n\t\t\tthis.radio = e.detail.value;\n\t\t},\n\t\tPickerChange: function(e) {\n\t\t\tthis.index = e.detail.value;\n\t\t\tswitch (index) {\n\t\t\t\tcase 0:\n\t\t\t\t\tticketType = 'FOOD'; // 餐饮券\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tticketType = 'ENTERTAINMENT'; // 影音娱乐券\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tticketType = 'ADMINSION'; // 景点门票\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tticketType = 'FILM'; // 电影票\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tticketType = 'CONCERT'; // 演唱会门票\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tticketType = 'EXHIBITION'; // 展览门票\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tticketType = 'FOOD';\n\t\t\t\t\tbreak;\n\t\t\t};\n\t\t},\n\t\tGetPrice: function(e) {\n\t\t\tthis.price = e.detail.value\n\t\t\t\t.replace(/[^\\d.]/g, '') // 清除“数字”和“.”以外的字符\n\t\t\t\t.replace(/\\.{2,}/g, '.') // 只保留第一个. 清除多余的\n\t\t\t\t.replace('.', '$#$')\n\t\t\t\t.replace(/\\./g, '')\n\t\t\t\t.replace('$#$', '.')\n\t\t\t\t.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3'); // 只能输入两个小数\n\t\t\tif (this.price.indexOf('.') < 0 && this.price != '') {\n\t\t\t\t// 以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额\n\t\t\t\tthis.price = parseFloat(this.price);\n\t\t\t};\n\t\t\tlet user = uni.getStorageSync('user');\n\t\t\tthis.totalPrice = calculatePrice(this.price, user.memberShipLevel);\n\t\t\tthis.totalPrice = this.totalPrice.toFixed(3);\n\t\t\tif (this.totalPrice.indexOf('.') > -1) {\n\t\t\t\t// 最终价格保留2位小数，但是只做舍弃处理，不做进1位处理\n\t\t\t\tlet index = this.totalPrice.indexOf('.');\n\t\t\t\tthis.totalPrice = this.totalPrice.substring(0, index + 3);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tvalue: this.price,\n\t\t\t};\n\t\t},\n\t\tGetQrCode: function(e) {\n\t\t\t// 限制二维码串只能输入英文和数字\n\t\t\tthis.qrCode = e.detail.value.replace(/[^\\a-\\z\\A-\\Z0-9]/g, '');\n\t\t\treturn {\n\t\t\t\tvalue: this.qrCode,\n\t\t\t};\n\t\t},\n\t\tGetTypeName: function(e) {\n\t\t\tthis.ticketName = e.detail.value;\n\t\t},\n\t\tStartDateChange: function(e) {\n\t\t\tthis.startDate = e.detail.value;\n\t\t},\n\t\tEndDateChange: function(e) {\n\t\t\tthis.endDate = e.detail.value;\n\t\t},\n\t\tChooseImage: function(e) {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 4, //默认9\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\n\t\t\t\t\tif (this.imgList.length != 0) {\n\t\t\t\t\t\tthis.imgList = this.imgList.concat(tempFilePaths);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.imgList = tempFilePaths;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tViewImage: function(e) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: this.imgList,\n\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t});\n\t\t},\n\t\tDelImg: function(e) {\n\t\t\tuni.showModal({\n\t\t\t\tcontent: '确定要删除这张二维码截图吗？',\n\t\t\t\tconfirmText: '确认',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.imgList.splice(e.currentTarget.dataset.index, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tCommitEticket: function(e) {\n\t\t\tlet user = uni.getStorageSync('user');\n\t\t\tlet wechatOpenId = user.wechatOpenId;\n\t\t\tlet telephoneNumber = user.telephoneNumber;\n\t\t\tvar count = 0;\n\t\t\tvar imgList = this.imgList;\n\t\t\tthis.submitSuccess = 1;\n\t\t\tvar idempotentToken = '';\n\t\t\tuni.request({\n\t\t\t\turl:GET_IDEMPOTENT_TOKEN,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-Token': uni.getStorageSync('token').token\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tlet resData = res.data;\n\t\t\t\t\tif (resData.responseCode == '400') {\n\t\t\t\t\t\t// 券码提交成功\n\t\t\t\t        idempotentToken=resData.idempotentToken;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '错误',\n\t\t\t\t\t\tcontent: '系统异常，请再次点击确认发布！',\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (var i = 0; i < imgList.length; i++) {\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl: UPLOAD_FILE_URL,\n\t\t\t\t\tfilePath: imgList[i],\n\t\t\t\t\tname: 'uploadFile',\n\t\t\t\t\tformData: {\n\t\t\t\t\t\t'wechatOpenId': wechatOpenId,\n\t\t\t\t\t\t'ticketType': this.ticketType\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\n\t\t\t\t\t\t'X-Token': uni.getStorageSync('token').token,\n\t\t\t\t\t\t'idempotent-token':idempotentToken,\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t\tlet uploadFileResData = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\tif (count == imgList.length && uploadFileResData.responseCode === '200') {\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl:GET_IDEMPOTENT_TOKEN,\n\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t\t'X-Token': uni.getStorageSync('token').token\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tlet resData = res.data;\n\t\t\t\t\t\t\t\t\tif (resData.responseCode == '400') {\n\t\t\t\t\t\t\t\t\t\t// 券码提交成功\n\t\t\t\t\t\t\t\t        idempotentToken=resData.idempotentToken;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '错误',\n\t\t\t\t\t\t\t\t\t\tcontent: '系统异常，请再次点击确认发布！',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\turl: SUBMIT_ETICKET_URL,\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t'wechatOpenIdSeller': wechatOpenId,\n\t\t\t\t\t\t\t\t\t'telephoneNumber': telephoneNumber,\n\t\t\t\t\t\t\t\t\t'price': this.price,\n\t\t\t\t\t\t\t\t\t'totalPrice': this.totalPrice,\n\t\t\t\t\t\t\t\t\t'imgAddress': uploadFileResData.imgAddress,\n\t\t\t\t\t\t\t\t\t'uploadFlag': 1,\n\t\t\t\t\t\t\t\t\t'qrCode': this.qrCode,\n\t\t\t\t\t\t\t\t\t'startDate': this.startDate,\n\t\t\t\t\t\t\t\t\t'endDate': this.endDate,\n\t\t\t\t\t\t\t\t\t'orderType': this.radio,\n\t\t\t\t\t\t\t\t\t'ticketName': this.ticketName,\n\t\t\t\t\t\t\t\t\t'ticketType': this.ticketType,\n\t\t\t\t\t\t\t\t\t'orderStatus': this.radio === 'SELL' ? '1' : '0', // 订单状态，刚发布完的券码要么是出售中要么是求购中\n\t\t\t\t\t\t\t\t\t'sqlMethod': 1, // 发布券码，即插入操作\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\t\t'X-Token': uni.getStorageSync('token').token,\n\t\t\t\t\t\t\t\t\t'idempotent-token':idempotentToken,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tlet resData = res.data;\n\t\t\t\t\t\t\t\t\tif (resData.responseCode == '300') {\n\t\t\t\t\t\t\t\t\t\t// 券码提交成功\n                                           \n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '错误',\n\t\t\t\t\t\t\tcontent: '二维码图片上传失败，请再次点击确认发布！',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commiteticket.vue?vue&type=style&index=0&id=b52c66de&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commiteticket.vue?vue&type=style&index=0&id=b52c66de&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}